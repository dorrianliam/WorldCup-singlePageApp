webpackJsonp([20],{945:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a.d(e,"init",function(){return S});var n=a(33),c=a.n(n),o=a(42),r=a.n(o),i=a(16),s=a.n(i),d=a(41),u=a(0),l=a(23),f=a(410),h=a(73),m=a(553),b=a(946),p=a(947),v=a(948),j=a(949),O=a(554),g=a(555),y=a(398),_=function(t,e){var a=new p.a(t,u.a.get("page.pageId"));return a.fetch().then(function(n){var c=void 0;n.nav&&n.nav.trim().length>0&&(c=d.a.create(n.nav).first().each(function(e){(t.id||Object(d.a)(".tabs__tab",e).length>2)&&Object(d.a)(".js-sport-tabs").append(e)})),e&&e(n,c,a.endpoint)}).catch(function(){Object(d.a)(".score-container").remove(),Object(d.a)(".js-score").removeClass("u-h")})},w=function(t,e){var a=[].concat(c()(t)).filter(function(t){return t}),n=function(t,e,a,n){d.a.create(t).each(function(t){u.a.get("page.isLiveBlog")&&Object(d.a)(t).addClass("dropdown--key-events"),e&&e.name&&Object(d.a)(".dropdown__label",t).append(e.name),e&&e.content&&Object(d.a)(".dropdown__content",t).append(e.content),e&&e.name&&Object(d.a)(".dropdown__button",t).attr("data-link-name","Show dropdown: "+(e.name||"")).each(function(t){0===n&&r.a.fire(t,"click")})}).appendTo(a)};0===a.filter(function(t){return t&&!1===t.ready}).length&&Object(f.a)(function(){Object(d.a)(".js-after-article").append(d.a.create('<div class="football-extras"></div>').each(function(t){a.filter(Boolean).forEach(function(a,c){e?n(e,a,t,c):a.content&&t.appendChild(a.content)})}))},function(){a.filter(Boolean).forEach(function(t){t.content&&t.importance&&Object(g.a)(t.content,t.importance)})})},k=function(t,e,a){e[2]={ready:!1},d.a.create('<div class="js-football-table"\n              data-link-name="football-table-embed"></div>\n        ').each(function(n){Object(b.c)(t).fetch(n).then(function(){Object(d.a)(".table__container",n).length>0?e[2]={name:"Table",importance:3,content:n,ready:!0}:e[2]=void 0,w(e,a)}).catch(function(){delete e[2],w(e,a)})})},C=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Loading…",a=arguments[2];s()(t).append(s.a.create('\n            <div class="loading">\n                <div class="loading__message">'+e+'</div>\n                    <a href="'+a.href+'"\n                       class="loading__link">'+a.text+'</a>\n                    <div class="loading__animation"></div>\n            </div>\n        '))},T=function(t){Object(d.a)(".loading",t).remove()},S=function(){var t=[],e=void 0;Object(f.e)(function(a){if(t[0]={ready:!1},"stats"===a.pageType)_(a);else{var n=Object(d.a)(".js-score"),c=new O.a({pageType:a.pageType,parent:n,responseDataKey:"matchSummary",autoupdated:a.isLive});_(a,function(a,o,r){if(e=a.dropdown,/^\s+$/.test(c.template||"")?n.removeClass("u-h"):(c.endpoint=r,c.loadFromJson(a.matchSummary)),a.hasStarted&&o){var i=Object(d.a)(".tab--stats a",o).attr("href").replace(/^.*\/\/[^/]+/,"");d.a.create('\n                        <div class="match-stats__container js-match-stats"></div>\n                    ').each(function(a){Object(b.b)(i).fetch(a).then(function(){Object(d.a)(".js-chart",a).each(function(t){(new m.a).render(t)}),t[0]={name:"Match stats",importance:3,content:a,ready:!0},w(t,e)})})}else delete t[0],w(t,e);Object(f.b)(function(n){t[1]={ready:!1},""!==a.group&&k(n+"/"+a.group,t,e),d.a.create('\n                        <div class="js-football-match-day"\n                             data-link-name="football-match-day-embed"></div>\n                    ').each(function(c){Object(b.a)(n,a.matchDate).fetch(c).then(function(){t[1]={name:"Today’s matches",importance:2,content:c,ready:!0},w(t,e)}).catch(function(){delete t[1],w(t,e)})})})})}}),Object(f.b)(function(a){var n=Object(d.a)(".js-secondary-column").dim().height;(0===n||n>1800)&&k(a,t,e)}),Object(f.c)(function(){Object(d.a)(".js-chart").each(function(t){(new m.a).render(t)})}),Object(f.d)(function(){var t=new v.a("match-day",Object(f.b)()||"premierleague",u.a.dateFromSlug()),e=Object(d.a)(".media-primary"),a=d.a.create('\n            <div class="football-matches__container"\n                  data-link-name="football-matches-clockwatch"></div>\n        ').css({minHeight:e[0]?e[0].offsetHeight:0});e.addClass("u-h"),C(a[0],"Fetching today’s matches…",{text:"Impatient?",href:"/football/live"}),Object(d.a)(".js-football-meta").append(a);var n=function(n){n&&0!==Object(d.a)(".football-match",a[0]).length||(t.destroy(),a.remove(),e.removeClass("u-h")),a.css({minHeight:0}),T(a[0])};t.fetch(a[0]).then(function(){n(!0)}).catch(function(){n(!1)})}),r.a.on(document.body,"click",".js-show-more-football-matches",function(t){t.preventDefault();var e=t.currentTarget;if(e&&e instanceof HTMLAnchorElement){var a=e.getAttribute("href"),n=e.getAttribute("data-puts-more-into"),c=e.getAttribute("data-new-url");a&&n&&c&&Object(l.a)(a+".json").then(function(t){d.a.create(t.html).each(function(a){var o=document.querySelector('[data-show-more-contains="'+n+'"]');o&&(Object(y.d)(a),o.appendChild(a));var r=t[c];r?s()(e).attr("href",r):s()(e).remove()})}).catch(function(t){Object(h.a)(t,{feature:"football-show-more"})})}}),r.a.on(document.body,"change",Object(d.a)("form.football-leagues")[0],function(){window.location=this.value}),Object(j.a)()}},946:function(t,e,a){"use strict";a.d(e,"a",function(){return o}),a.d(e,"c",function(){return r}),a.d(e,"b",function(){return i});var n=a(35),c=function(t){var e=new n.a;return e.endpoint=t,e},o=function(t,e){return c("/football/match-day/"+t+"/"+e+".json")},r=function(t){return c("/football/"+t+"/table.json")},i=function(t){return c(t+".json")}},947:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a(11),c=a.n(n),o=a(13),r=a.n(o),i=a(23),s=function(){function t(e,a){c()(this,t);var n=e.id||[e.date].concat(e.teams).join("/"),o=encodeURIComponent(a);this.endpoint="/football/api/match-nav/"+n+".json?page="+o}return r()(t,[{key:"fetch",value:function(){return Object(i.a)(this.endpoint,{mode:"cors"})}}]),t}()},948:function(t,e,a){"use strict";a.d(e,"a",function(){return m});var n=a(11),c=a.n(n),o=a(13),r=a.n(o),i=a(75),s=a.n(i),d=a(76),u=a.n(d),l=a(41),f=a(16),h=a.n(f),m=function(t){function e(t,a,n){c()(this,e);var o=s()(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),r=["football",t,a,n].filter(function(t){return t}).join("/");return o.autoupdated=!0,o.updateEvery=10,o.endpoint="/"+r+".json",o}return u()(e,t),r()(e,[{key:"autoupdate",value:function(t){var e=this,a=Object(l.a)(".football-match",t);Object(l.a)(".football-match",this.elem).each(function(t,n){var c=h()(t).removeClass("football-match--updated"),o=h()(a[n]);["score-home","score-away","match-status"].forEach(function(t){var a="data-"+t;o.attr(a)!==c.attr(a)&&(c.replaceWith(o.addClass("football-match--updated")),e.prerender())})})}},{key:"prerender",value:function(){var t=this.elem;Object(l.a)(".football-team__form",t).remove(),Object(l.a)(".date-divider",t).remove(),Object(l.a)(this.elem).addClass("table--small"),Object(l.a)(".football-matches__date",this.elem).replaceWith('<span class="item__live-indicator">Live</span>')}}]),e}(a(35).a)},949:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var n=a(0),c=a(23),o=a(73),r=function(){var t=document.querySelector(".js-insert-team-stats-after");t&&Object(c.a)("/"+n.a.page.pageId+"/fixtures-and-results-container",{mode:"cors"}).then(function(e){e.html&&t.insertAdjacentHTML("afterend",e.html)}).catch(function(t){Object(o.a)(t,{feature:"tag-fixtures"})})}}});
//# sourceMappingURL=graun.football.js.map